# プロを目指す人のためのRuby 4章 配列や繰り返し処理を理解する

## 概要
* 10進数を16進数にするto_hexというメソッドと、16進数を10進数に変換するto_intsというメソッドを作成しながら
* **Rubyらしい考え方** と **Rubyらしいコードの書き方**を学ぶ

## 4.2 配列

* 配列には異なるデータ型を格納することができる


#### 4.2.1 配列の変更、追加、削除

* 元来の大きさを超えた添字を指定して、配列に代入すると、その間はnilが格納される

```

tmp = ['a', 'b', 'c']
tmp[7] = 'h'
p tmp # => ["a", "b", "c", nil, nil, nil, nil, "h"]

```

* <<を使うと配列の最後に要素が格納される

#### 4.2.2 配列を使った多重代入

* Rubyでは多重代入ができる。なので、多重配列を受け取ることもできる。
* 実例で言うと、divmodという商と余りを返してくれるメソッドがある

```
quo_rem = 14.divmod(3)
p quo_rem[0] # =>4
p quo_rem[1] # =>2
```
* 1つずつ受け取るには 

```
quo, rem = 14.divmod(3)
p quo # =>4
p rem # =>2
```

## 4.3 ブロック

* Rubyではfor文は使わない！！！！！！
* 実際の処理をしてくれるところのこと
* 長い処理はdo..end,短い処理派{}を使用する

> 「要件を問わず共通する処理」はメソッド自身に、「要件によって異なる処理」はブロックにそれぞれ分担させて...

```
print "4.3.2 Rubyの繰り返し処理\n"
numbers = [1, 2, 3, 4]
sum = 0
numbers.each do |n|
  sum += n
end
puts sum # =>10

```

#### 4.4.5

* 「&:メソッド名」という書き方でブロックを扱うメソッド処理を簡潔に書くことができる

```
# これは
['a', 'b', 'c'].map { {|s| s.upcase }

# こう書き換えられる
['a', 'b', 'c'].map { &:upcase }

```

条件としては下記

- [x] ブロックパラメータが1個だけある
- [x] ブロックの中で呼び出すメソッドに引数がない
- [x] ブロックの中では、ブロックパラメータに対してメソッドを一回呼び出す以外の処理がない

## 4.5 範囲

* 最初の値..最後の値  = 最後の値を含む
* 最初の値...最後の値 = 最後の値を含まない
* これを利用すると配列のnからn1番目が欲しいとか、文字列の...(以下省略)もできる
* 他の言語だと、条件式 && 条件式　とかしないといけないから便利ですね

# 4.7 配列についてもっと詳しく

* 配列の和集合、差集合、積集合も扱える
* 和は「|」差は「-」積は「&」
* 配列に展開して渡すのか、配列のまま渡すのかで記述が変わる

```
# 例1
a = []
b = [2, 3]
a.push(1)
a.push(b) #=> a=[1,[2,3]]

# 例2
a = []
b = [2, 3]
a.push(1)
a.push(*b) #=> a=[1,2,3]

```

### 4.7.7 メソッドの可変長引数

* def hoge(*names) のような形で引数を可変で受け取れる

### 4.7.12 配列にデフォルト値を設定する

* a = Array.new(5, 0) # => [0, 0, 0, 0, 0,]
* ただし、すべての要素は同じオブジェクトを参照している。なので、1つの値を変更すると全てに反映されてしまう。
* a = Array.new(5) { 'default' }
* ただし、これはミュータブルなクラスのみ起きる現象で下記のいミュータブルな値には起こらない

- [] 数値
- [] シンボル
- [] true/false
- [] nil
- [] 範囲

### 4.11 繰り返し処理用の制御構文

* throwでは制御の一番外側まで出られる。例外処理とは関係ない！
* throwの第二引数を渡すと、catchメソッドの戻り値になる！

```
catch タグ do
  #繰り返し処理
  throw : タグ
end 

```